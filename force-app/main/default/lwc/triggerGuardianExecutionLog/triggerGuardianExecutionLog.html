<template>
    <div class="search-container slds-p-bottom_small">
        <div class="slds-grid slds-wrap slds-gutters">
            
            <!-- Search Input -->
            <div class="slds-col slds-size_1-of-5">
                <lightning-input
                    type="search"
                    label="Search Logs"
                    placeholder="Search by keyword"
                    value={searchTerm}
                    onchange={handleInputChange}
                    onkeydown={handleSearchKeydown}>
                </lightning-input>
            </div>
    
            <!-- Start Date -->
            <div class="slds-col slds-size_1-of-6">
                <lightning-input
                    type="date"
                    label="Start Date"
                    value={startDate}
                    onchange={handleDateChange}
                    data-id="startDate">
                </lightning-input>
            </div>
    
            <!-- End Date -->
            <div class="slds-col slds-size_1-of-6">
                <lightning-input
                    type="date"
                    label="End Date"
                    value={endDate}
                    onchange={handleDateChange}
                    data-id="endDate">
                </lightning-input>
            </div>
    
            <!-- Status Dropdown -->
            <div class="slds-col slds-size_1-of-6">
                <lightning-combobox
                    label="Execution Status"
                    value={statusFilter}
                    options={statusOptions}
                    onchange={handleStatusChange}>
                </lightning-combobox>
            </div>
    
            <!-- Apply Filters Button -->
            <div class="slds-col slds-size_1-of-6 slds-align-bottom">
                    <lightning-button
                        label="Apply Filters"
                        variant="brand"
                        onclick={applyFilters}>
                    </lightning-button>
            </div>
        </div>
    </div>    

    <!-- Loading Spinner -->
    <template if:true={isLoading}>
        <lightning-spinner alternative-text="Loading" size="small"></lightning-spinner>
    </template>

    <!-- Logs Display -->
    <template if:true={logs.length}>
        <lightning-datatable
            key-field="Id"
            data={logs}
            columns={columns}
            onrowaction={handleRowAction}
            hide-checkbox-column
            show-row-number-column>
        </lightning-datatable>

        <!-- Load More Button -->
        <div class="slds-m-top_medium">
            <lightning-button label="Load More" onclick={loadMoreLogs} variant="brand">
            </lightning-button>
        </div>
    </template>

    <!-- Empty State Message -->
    <template if:true={noLogsFound}>
        <div class="slds-text-color_weak">No logs found</div>
    </template>

    <!-- Error State -->
    <template if:true={errorMessage}>
        <div class="slds-text-color_error">{errorMessage}</div>
    </template>
</template>